I'm the web server that provides a REST API for creating, deleting and finding books. My responses are in JSON format (generated by NeoJSON). I use Teapot internally. In case of an unsuccessful request I use HTTP code to indicate the error along with a JSON object that contains a code and a message key. See the examples below for more information.

Usage:
	server := LibraryServer serveOn: 8000.
	client := LibraryClient port: 8000.
	
	client addBook:  {#title -> 'book 1'. #authors -> 'author 1'} asDictionary.
	client books inspect.
	
	server stop.

Example HTTP requests:

Create book
	Request:
		POST http://localhost:8000/books
		Content-Type: application/x-www-form-urlencoded
		title=book1&authors=author1
	Response:
		201 {"title":"book1","id":1,"authors":"author1"}
	
Malformed create
	Request:
		POST http://localhost:8000/books
		Content-Type: application/x-www-form-urlencoded
		title=book1
	Response:
		400 {"message":"Missing parameter: authors","code":"MALFORMED_INPUT"}
		
Modify book
	Request:
		PUT http://localhost:8000/books
		Content-Type: application/x-www-form-urlencoded	
		title=book1&authors=author2
	Response:
		200 {"title":"book1","id":1,"authors":"author2"}
		
Malformed modify
	Request:
		PUT http://localhost:8000/books
		Content-Type: application/x-www-form-urlencoded	
		title=book1
	Response:
		400 {"message":"Missing parameter: authors","code":"MALFORMED_INPUT"}			
					
Delete book
	Request:
		DELETE http://localhost:8000/books/1
	Response:
		200 {"title":"book1","id":1,"authors":"author2"}
		
Deleting non existent
	Request:
		http://localhost:8000/books/3	
	Response:
		404 {"message":"No such book: 3","code":"NOT_FOUND"}
		
Find book
	Request:
		GET http://localhost:8000/books/1
	Response:
		200 {"title":"book1","id":3,"authors":"author2"}	
			
Find non existent
	Request:
		GET http://localhost:8000/books/1
	Response:	
		404 {"message":"No such book: 1","code":"NOT_FOUND"}
			
List all
	Request:
		GET http://localhost:8000/books
	Response:
		200 [{"title":"book1","id":3,"authors":"author2"}]